<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="themes/prism.css" rel="stylesheet" />
<link href="themes/collapsible.css" rel="stylesheet" />
</head>
<body>
<script src="themes/prism.js"></script>
<h1> By using https://aka.ms/LADemo try to execute following tasks: </h1>
<button><sth><b>Jake is a support professional working on an issue with the newly deployed application. He is following a TSG to troubleshoot the issue.
  The following are the questions that he asks himself</b></sth>
</button>
</p>
<button class="collapsible">
<std>How do I query AppExceptions table ?</std><br>
<br>  
<b>Task 01: </b><br>Query AppExceptions table
<br>

</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions 
//use comments
</code></pre></div>

</p>
<button class="collapsible">
 <std>How do I limit the number of rows in the result?</std><br><br>
<b>Task 02: </b><br>Query any 10 rows from table AppExceptions</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions 
| take 10
</code></pre></div>
</p>
<button class="collapsible">
 <std>How do I query the number of rows in AppExceptions table?</std><br><br>
<b>Task 03: </b><br>Query number of rows in AppExceptions Table</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions // note the default time range (24h)
| count
</code></pre></div>
</p>
<button class="collapsible">
<std>How do I find out the severity level of the logs generated?</std>
<br><br>
<b>Task 04: </b><br>List all unique values of field SeverityLevel from Table AppExceptions</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| distinct SeverityLevel</code></pre></div>
</p>
<button class="collapsible">
<std>How can I associate the client with the severitylevel of exceptions?</std><br><br>
<b>Task 05: </b><br>List all unique combinations of fiels SeverityLevel and ClientType from Table AppExceptions</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| distinct SeverityLevel, ClientType
</code></pre></div>
</p>
<button class="collapsible">
<std>How do I filter the data for clients of type ‘PC’ for last 24 hours?</std><br><br>
<b>Task 06: </b><br>List all rows in AppExceptions table we have in previous 1 day where ClientType is “PC”</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| where  TimeGenerated >= ago(1d)
| where  ClientType =="PC"
</code></pre></div>
</p>
<button class="collapsible">
<std>How do I find out number of logs generated by PC clients?</std><br><br>
<b>Task 07: </b><br>how many rows in AppExceptions table we have in previous 1 day where ClientType is “PC”</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| where  TimeGenerated >= ago(1d)
| where  ClientType =="PC"
| count</code></pre></div>
</p>
<button class="collapsible">
<std>How do I filter my data for clients of type ‘PC’ from outside of United States. I am specially interested in Browser, the city, 
  the country , the model of the computer and the OperatingSystem?  I want the data sorted by time desc.</std><br><br>
<b>Task 08: </b><br>List ClientBrowser, ClientCity, ClientCountryOrRegion , ClientModel, ClientOS  fields values found in AppExceptions Table  
where ClientTYpe is “PC” in previous 1 day and ClientCountryOrRegion is not “United States” </button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| where  TimeGenerated >= ago(1d)
| where  ClientType =="PC"
| where ClientCountryOrRegion  != "United States" 
| project ClientBrowser, ClientCity, ClientCountryOrRegion , ClientModel, ClientOS</code></pre></div>
</p>
<button class="collapsible">
<std>How do I get the list of city and country with column name formatted for my reporting purposes?</std><br><br>
<b>Task 09: </b><br>List City and Org fields values found in AppExceptions Table  where ClientTYpe is “PC” in previous 1 day 
and ClientCountryOrRegion is not “United States” . City is created from ClientCity field and Org is concatenating ClientCity and ClientCountryOrRegion </button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| where  TimeGenerated >= ago(1d)
| where  ClientType =="PC"
| where ClientCountryOrRegion  != "United States" 
| project City =ClientCity, Org= strcat(ClientCity , " - ", ClientCountryOrRegion)</code></pre></div>
</p>
<button class="collapsible">
<std>How do I get the first 10 rows from AppException table for PC?</std><br><br>
<b>Task 10: </b><br>List first 10 rows from AppExceptions table where ClientTYpe is “PC” in previous 1 day sorted by TimeGenerated</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| where  TimeGenerated <= ago(1d)
| where  ClientType =="PC"
| top 10 
| order by TimeGenerated desc </code></pre></div>
</p>
<button class="collapsible">
<std>How do I list the AppExceptions in last 10 days?</std><br><br>
<b>Task 11: </b><br>List number of AppExceptions in last 10 days</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| where  TimeGenerated >= ago(10d)
| count</code></pre></div>
</p>
<button class="collapsible">
<std>How do I get number of exceptions from New York or from Approleinstance – ‘RETAILVM01’?</std><br><br>
<b>Task 12: </b><br>List number of AppExceptions in last 10 days where ClientCity is “New York” or  AppRoleInstance is “RetailVM01”</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| where  TimeGenerated >= ago(10d)
| where ClientCity =="New York" or AppRoleInstance == "RETAILVM01"
| count ;</code></pre></div>
</p>
<button class="collapsible">
<std>How do I filter the exception records for the outer message starting with “input” for last 10 days?
   Can I get the count of records?</std><br><br>
<b>Task 13: </b><br>List number of AppExceptions in last 10 days where Find all rows in AppExceptions table in last 10 days 
where OuterMessage field starts with “Input”
How many rows ?</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| where  TimeGenerated >= ago(10d)
| where OuterMessage  startswith "input"
//| count ;
</code></pre></div>
</p>
<button class="collapsible">
<std>How do I filter the exception records for the outer message starting with “SQL” for last 10 days? 
  Can I get the count of records?</std><br><br>
<b>Task 14: </b><br>Find number of rows in AppExceptions table in last 10 days where OuterMessage is mentioning SQL</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| where  TimeGenerated >= ago(10d)
| where OuterMessage contains "SQL"
| count ;</code></pre></div>
</p>
<button class="collapsible">
<std>How do I filter the exception records for the outer message starting with “SQL”(all caps)?</std><br><br>
<b>Task 15: </b><br>List all rows in AppExceptions table in last 10 days where OuterMessage is mentioning  SQL but not sql</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| where  TimeGenerated >= ago(10d)
| where OuterMessage  contains_cs "SQL"
//| count ;
</code></pre></div>
</p>
<button class="collapsible">
<std>How do I filter the exception records for the outer message starting with “Format”(exact case)?</std><br><br>
<b>Task 16: </b><br>List all rows in AppExceptions table in last 10 days where OuterMessage is ending with casesensitive “Format”</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| where  TimeGenerated >= ago(10d)
| where OuterMessage  endswith_cs "Format"
//| count ;</code></pre></div>
</p>
<button class="collapsible">
<std>How do I filter the exceptionrecords that has filter in any of the columns?</std><br><br>
<b>Task 17: </b><br>List all rows in AppExceptions table in last 10 days having SQL in any column</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| where  TimeGenerated >= ago(10d)
| search "SQL";</code></pre></div>
</p>
<button class="collapsible">
<std>How do I filter the exceptionrecords where problemId starts with “System”?</std><br><br>
<b>Task 18: </b><br>List all rows in AppExceptions table in last 24 hours having ProblemId startsWith”System”</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| where  TimeGenerated >= ago(24h)
| search ProblemId: "System*"
//| distinct  ProblemId</code></pre></div>
</p>
<button class="collapsible">
<std>How do I generate a report the number of exceptions per city in last 10 days?</std><br><br>
<b>Task 19: </b><br>Count number of rows in table AppExceptions in last 10 days per ClientCity</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| where  TimeGenerated >= ago(10d)
| summarize count() by ClientCity
</code></pre></div>
</p>
<button class="collapsible">
<std>How do I determine the city and the severitylevel  of the exception with the client type as “Browser”?</std><br><br>
<b>Task 20: </b><br>Count number of rows in table AppExceptions in last 10 days per ClientCity 
and SeverityLevel if Client Type is “Browser”</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| where  TimeGenerated >= ago(10d)
| summarize countif(ClientType=="Browser") by ClientCity, SeverityLevel
</code></pre></div>
</p>
<button class="collapsible">
<std>How do I generate the report for the count of exceptions per clientbrowser per city?</std><br><br>
<b>Task 21: </b><br>Count number of rows in table AppExceptions in last 10 Show TotalCount of rows in table AppExceptions in last 10 days per ClientCity and ClientBrowser. TotalCount is calculated using function count()</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| where  TimeGenerated >= ago(10d)
| summarize TotalCount = count() by ClientCity, ClientBrowser</code></pre></div>
</p>
<button class="collapsible">
<std>How do I generate the report of count of exceptions and average severitylevel for each client city?</std><br><br>
<b>Task 22: </b><br>Show TotalCount and Average of severityLevel of rows in table AppExceptions in last 10 days per ClientCity. </button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| where  TimeGenerated >= ago(10d)
| summarize count() , avg(SeverityLevel) by ClientCity</code></pre></div>
</p>
<button class="collapsible">
<std>How do I get the number of rows in AppExcption table per day for last 10 days?</std><br><br>
<b>Task 23: </b><br>Show number of rows in table AppExceptions in last 10 days per day</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| where  TimeGenerated >= ago(10d)
| summarize count()  by bin(TimeGenerated , 1d)</code></pre></div>
</p>
<button class="collapsible">
<std>Lets get the timegenerated columns as Day, month and year so that we can use these fields in our reporting?</std><br><br>
<b>Task 24: </b><br>Create Field showing day number , monthnumber and year year from field TimeGenerated in last 10 days in AppExceptions table and show any 10 rows</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| extend _Day=dayofmonth(TimeGenerated)  
| extend _Month= monthofyear(TimeGenerated)  
| extend _Year=getyear(TimeGenerated)  
| where  TimeGenerated >= ago(10d)
| take 10</code></pre></div>
</p>
<button class="collapsible">
<std>How do I get the number of exceptions for each day, month and year? 
Getting the data for last 10 days will suffice.</std><br><br>
<b>Task 25: </b><br>Create Field showing day number , monthnumber and year year from field TimeGenerated in last 10 days in AppExceptions table and show number of rows per daynumber , month and year</button>
<div class="content">
<p></p>
<pre><code class="language-sql">AppExceptions
| extend _Day=dayofmonth(TimeGenerated)  
| extend _Month= monthofyear(TimeGenerated)  
| extend _Year=getyear(TimeGenerated)  
| where  TimeGenerated >= ago(10d)
| summarize count()  by _Year, _Month, _Day</code></pre></div>







<script>
var coll = document.getElementsByClassName("collapsible");
var i;

for (i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var content = this.nextElementSibling;
    if (content.style.maxHeight){
      content.style.maxHeight = null;
    } else {
      content.style.maxHeight = content.scrollHeight + "px";
    } 
  });
}
</script>

</body>
</html>
