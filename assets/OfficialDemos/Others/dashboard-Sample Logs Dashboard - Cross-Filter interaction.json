{"$schema":"https://dataexplorer.azure.com/static/d/schema/24/dashboard.json","id":"b0bd4633-438c-4a97-853e-50071cdcf457","eTag":"b0bd4633-438c-4a97-853e-50071cdcf457","schema_version":"24","title":"Sample Logs Dashboard - Cross-Filter interaction","autoRefresh":{"enabled":true,"minInterval":"30s"},"tiles":[{"id":"6b7f2329-d9bb-433b-af41-746ef3b6db5d","title":"TotalCount","query":"//Get total count of records in \"RawLogs\" table\nRawSysLogs\n| count \n\n","dataSourceId":"f0801b55-43b2-4c6d-bf51-261fbe0bdc24","visualType":"card","pageId":"a96e40cb-d2b0-4430-ae75-b5e713061370","layout":{"x":16,"y":0,"width":4,"height":3},"usedParamVariables":[],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"52a2890a-b70e-47f4-875e-b0d753ca6592","column":{"type":"infer"},"conditions":[{"operator":"<","value":"100000"}],"color":"red","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"df38a604-a767-4216-aee7-d6d61ed129f3","column":{"type":"infer"},"conditions":[{"value":"500000","operator":"<"}],"color":"yellow","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"5c7dd0ef-80c1-4195-937c-c81861360539","column":{"type":"infer"},"conditions":[{"operator":">","value":"900000"}],"color":"green","indicator":{"kind":"text","text":{"type":"specified","value":"Healthy"}}}],"colorStyle":"bold"}},{"id":"7a716ca5-0618-4f38-a666-8886bf34290c","title":"Sample Logs Live Dashboard","query":"Dashboard on sample logs dataset ingested in TransformedLogs table. These are linux OS(syslog) logs that are ingested using opensource, lightweight agent called [Telegraf](https://docs.influxdata.com/telegraf/v1.21/). This dataset has live ingestion on RawLogs table using the [syslog input plugin](https://github.com/influxdata/telegraf/tree/master/plugins/inputs/syslog) and [Azure Data Explorer output plugin](https://github.com/influxdata/telegraf/tree/master/plugins/outputs/azure_data_explorer) for Telegraf. In similar manner, any type of logs can be ingested using event/IoT hub, Kafka, Azure data factory, Logstash, Fluentbit, spark or using any of [these](https://docs.microsoft.com/en-us/azure/data-explorer/ingest-data-overview) supported ingestion components. \n","visualType":"markdownCard","pageId":"a96e40cb-d2b0-4430-ae75-b5e713061370","layout":{"x":0,"y":0,"width":16,"height":3},"usedParamVariables":[],"visualOptions":{}},{"id":"48f0451f-f9c5-45d9-b2c5-fac1d7d16f83","title":"Ingestions/hr","query":"//Records ingestion rate per hour\nlet _d=datetime_diff('day', _endTime, _startTime);\nlet _h=_d*24;\nTransformedSysLogs\n| where timestamp between(_startTime.._endTime)\n| summarize count()\n| project RecordsRatePerMin = count_/_h","dataSourceId":"f0801b55-43b2-4c6d-bf51-261fbe0bdc24","visualType":"card","pageId":"a96e40cb-d2b0-4430-ae75-b5e713061370","layout":{"x":20,"y":0,"width":4,"height":3},"usedParamVariables":["_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"1ede9dd3-0680-49c0-9938-9c15ccf0de8f","column":{"type":"infer"},"conditions":[{"operator":"<","value":"100"}],"color":"yellow","indicator":{"kind":"icon","icon":"sad","label":{"type":"infer"}}},{"id":"26777d33-c337-40f1-bd8c-9998f3ca3aae","column":{"type":"infer"},"conditions":[{"value":"100","operator":">="}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}}],"colorStyle":"bold"}},{"id":"e38ad0e0-e4a4-4513-a21d-ad48e70e1aee","title":"Top 5 apps","query":"//Error count generated by different applications\nTransformedSysLogs\n| where timestamp between (_startTime.._endTime)\n| where (isempty(_severity) or severity == _severity) and isnotempty(appname)\n// | where severity != \"err\" and isnotempty(appname)\n| summarize Errors=count() by appname\n| top 5 by Errors\n| render piechart    ","dataSourceId":"f0801b55-43b2-4c6d-bf51-261fbe0bdc24","visualType":"pie","pageId":"a96e40cb-d2b0-4430-ae75-b5e713061370","layout":{"x":9,"y":3,"width":8,"height":7},"usedParamVariables":["_endTime","_severity","_startTime"],"visualOptions":{"hideTileTitle":false,"hideLegend":false,"xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"crossFilterDisabled":false,"labelDisabled":false,"pie__label":["name","percentage"],"tooltipDisabled":false,"pie__tooltip":["name","percentage","value"],"pie__orderBy":"size","pie__kind":"pie","drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"3988b5bb-fd8a-4e3a-80a5-a82eb3f8eabc","title":"Errors over last 7 days","query":"//Errors over last 7 days in 30 min resolution\nTransformedSysLogs\n| where timestamp between(_startTime.._endTime) and severity == \"err\"\n| summarize Errors=count() by bin(SysLogTimestamp, 30m)\n| render timechart   \n","dataSourceId":"f0801b55-43b2-4c6d-bf51-261fbe0bdc24","visualType":"line","pageId":"a96e40cb-d2b0-4430-ae75-b5e713061370","layout":{"x":0,"y":3,"width":9,"height":7},"usedParamVariables":["_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[]},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"crossFilter":[]}},{"id":"a5cf6560-44b5-4f4d-b8ed-20d9dd8c3483","title":"Logs by severity","query":"//Aggregate records count by severity \nTransformedSysLogs\n| where timestamp between (_startTime.._endTime)\n| where isempty(_severity) or severity == _severity\n| summarize Count=count() by severity\n| render barchart  ","dataSourceId":"f0801b55-43b2-4c6d-bf51-261fbe0bdc24","visualType":"bar","pageId":"a96e40cb-d2b0-4430-ae75-b5e713061370","layout":{"x":17,"y":3,"width":7,"height":7},"usedParamVariables":["_endTime","_severity","_startTime"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[]},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[{"interaction":"column","property":"severity","parameterId":"dcda8268-876a-40cc-b080-f05ce9b82f9f","disabled":false}],"drillthrough":[]}},{"id":"f30685a1-8e3c-4322-a015-8662a00ab13b","title":"Search text by log description in message column","query":"//Full text search across multiple columns\nTransformedSysLogs\n| where timestamp between(_startTime.._endTime)\n| where isempty(_message) or message contains _message\n| where isempty(_severity) or severity == _severity\n| top 50 by timestamp\n| project name, timestamp, message, severity, appname, hostname, procid\n| order by timestamp desc","dataSourceId":"f0801b55-43b2-4c6d-bf51-261fbe0bdc24","visualType":"table","pageId":"a96e40cb-d2b0-4430-ae75-b5e713061370","layout":{"x":0,"y":10,"width":24,"height":9},"usedParamVariables":["_endTime","_message","_severity","_startTime"],"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"table__renderLinksForColumns":[],"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[{"interaction":"column","property":"severity","parameterId":"dcda8268-876a-40cc-b080-f05ce9b82f9f","disabled":false},{"interaction":"column","property":"message","parameterId":"fcfc8a6e-5c63-4efb-94ee-5b36f8721f6d","disabled":false},{"interaction":"column","property":"timestamp","parameterId":"42479cdd-0bdd-4e62-b279-3d358bedb25a","disabled":false}],"drillthrough":[]}}],"parameters":[{"kind":"duration","id":"42479cdd-0bdd-4e62-b279-3d358bedb25a","displayName":"Time range","beginVariableName":"_startTime","endVariableName":"_endTime","defaultValue":{"kind":"dynamic","count":30,"unit":"days"},"showOnPages":{"kind":"all"}},{"kind":"string","selectionType":"freetext","id":"fcfc8a6e-5c63-4efb-94ee-5b36f8721f6d","displayName":"Message","variableName":"_message","defaultValue":{"kind":"all"},"showOnPages":{"kind":"all"}},{"kind":"string","id":"dcda8268-876a-40cc-b080-f05ce9b82f9f","displayName":"Severity","variableName":"_severity","selectionType":"single-all","defaultValue":{"kind":"all"},"dataSource":{"kind":"query","consumedVariables":["_endTime","_startTime"],"query":"// Please enter your KQL query (Example):\n// <table name>\n// | where <datetime column> between (['_startTime'] .. ['_endTime']) // Time range filtering\n// | where isempty(['_message']) or <column name> == ['_message'] // Freetext filtering\n// | take 100\n\n\nTransformedSysLogs\n| where timestamp between (_startTime.._endTime)\n| summarize by severity\n","dataSourceId":"f0801b55-43b2-4c6d-bf51-261fbe0bdc24","columns":{"value":"severity"}},"showOnPages":{"kind":"all"}}],"dataSources":[{"id":"f0801b55-43b2-4c6d-bf51-261fbe0bdc24","name":"SampleLogs","scopeId":"kusto","clusterUri":"https://help.kusto.windows.net/","database":"SampleLogs","kind":"manual-kusto"}],"pages":[{"name":"Page 1","id":"a96e40cb-d2b0-4430-ae75-b5e713061370"}]}